# ServerMaster åŸºç¡€ä»£ç†é…ç½®æ–‡ä»¶æ ·ä¾‹ (proxy.yaml)
# æ­¤æ–‡ä»¶å®šä¹‰äº†æœ¬åœ°çš„åŸºç¡€èŠ‚ç‚¹ã€ä»£ç†ç»„å’Œåˆå§‹è§„åˆ™ã€‚
# ServerMaster ä¼šå°†æ­¤æ–‡ä»¶ä½œä¸ºæ¨¡æ¿ï¼ŒåŠ¨æ€åˆå¹¶ additions ä¸­çš„è¿œç¨‹è®¢é˜…èŠ‚ç‚¹ã€‚

# --- åŸºç¡€é…ç½® ---
mixed-port: 7890
allow-lan: true
mode: rule
log-level: info
ipv6: false

# --- DNS è®¾ç½® ---
dns:
  enable: true
  listen: :53
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  nameserver:
    - 223.5.5.5
    - 114.114.114.114
  fallback:
    - https://doh.pub/dns-query
    - https://dns.alicdn.com/dns-query

# --- æœ¬åœ°ä»£ç†èŠ‚ç‚¹ (Proxies) ---
proxies:
  # Trojan èŠ‚ç‚¹ç¤ºä¾‹
  - name: "æœ¬åœ°-æ–°åŠ å¡-Trojan"
    type: trojan
    server: example-sg.com
    port: 443
    password: "your-password"
    udp: true
    sni: example-sg.com
    skip-cert-verify: false

  # Shadowsocks èŠ‚ç‚¹ç¤ºä¾‹
  - name: "æœ¬åœ°-æ—¥æœ¬-SS"
    type: ss
    server: example-jp.com
    port: 8388
    cipher: aes-256-gcm
    password: "your-password"
    udp: true

  # VLESS èŠ‚ç‚¹ç¤ºä¾‹ (Clash Premium/Meta æ”¯æŒ)
  - name: "æœ¬åœ°-ç¾å›½-VLESS"
    type: vless
    server: example-us.com
    port: 443
    uuid: "your-uuid"
    udp: true
    tls: true
    network: ws
    sni: example-us.com

# --- ä»£ç†ç»„ (Proxy Groups) ---
# ServerMaster ä¼šåœ¨ç”Ÿæˆçš„é…ç½®ä¸­ä¿ç•™è¿™äº›ç»„ï¼Œ
# å¹¶æ ¹æ® config.yaml ä¸­çš„ additions è®¾ç½®ï¼Œå°†è¿œç¨‹èŠ‚ç‚¹åŠ å…¥åˆ°æŒ‡å®šçš„ç»„ä¸­ã€‚
proxy-groups:
  - name: "ğŸš€ èŠ‚ç‚¹é€‰æ‹©"
    type: select
    proxies:
      - "ğŸ¯ å…¨çƒç›´è¿"
      - "é¦™æ¸¯èŠ‚ç‚¹" # å¯¹åº” config.yaml additions ä¸­çš„ group-name
      - "æ–°åŠ å¡èŠ‚ç‚¹"
      - "æœ¬åœ°-æ–°åŠ å¡-Trojan"
      - "æœ¬åœ°-æ—¥æœ¬-SS"
      - "æœ¬åœ°-ç¾å›½-VLESS"

  - name: "é¦™æ¸¯èŠ‚ç‚¹"
    type: select
    proxies:
      - "DIRECT"

  - name: "æ–°åŠ å¡èŠ‚ç‚¹"
    type: select
    proxies:
      - "æœ¬åœ°-æ–°åŠ å¡-Trojan"

  - name: "ğŸ¯ å…¨çƒç›´è¿"
    type: select
    proxies:
      - "DIRECT"

  - name: "ğŸŸ æ¼ç½‘ä¹‹é±¼"
    type: select
    proxies:
      - "ğŸš€ èŠ‚ç‚¹é€‰æ‹©"
      - "ğŸ¯ å…¨çƒç›´è¿"

# --- è§„åˆ™é›† (Rule Providers) ---
# é…åˆ /file/:filename æ¥å£ä½¿ç”¨
rule-providers:
  direct:
    type: http
    behavior: classical
    url: "http://localhost:8080/file/direct.yaml"
    path: ./ruleset/direct.yaml
    interval: 86400
  proxy:
    type: http
    behavior: classical
    url: "http://localhost:8080/file/proxy.yaml"
    path: ./ruleset/proxy.yaml
    interval: 86400
  reject:
    type: http
    behavior: classical
    url: "http://localhost:8080/file/reject.yaml"
    path: ./ruleset/reject.yaml
    interval: 86400

# --- è·¯ç”±è§„åˆ™ (Rules) ---
rules:
  - RULE-SET,reject,REJECT
  - RULE-SET,direct,DIRECT
  - RULE-SET,proxy,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - GEOIP,CN,DIRECT
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼
